<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout :: layoutBase(~{::contenido})">
<head>
    <title>Editar Compra</title>
</head>
<body>
    <div th:replace="~{layout/layout :: layoutBase(~{::contenido})}">
        <div th:fragment="contenido">
            <div class="card shadow-lg mx-auto" style="max-width: 800px;">
                <div class="card-body">
                    <h1 class="text-center text-dark" th:utext="|Compra - Edición<br>Código ${compra.idCompra}|"></h1>
                    
                    <div class="row d-flex justify-content-center">
                        <div class="col-md-10">
                            <form novalidate th:action="@{/compras/guardar}" method="post" th:object="${compra}" class="needs-validation">
                                
                                <input type="hidden" th:field="*{idCompra}" />
                                
                                <div class="row">
                                    <div class="mb-3 col-md-4">
                                        <label for="fechaRegistro" class="form-label text-dark">Fecha Registro:</label>
                                        <input type="date" class="form-control" th:field="*{fechaRegistro}" required
                                               th:classappend="${#fields.hasErrors('fechaRegistro')} ? 'is-invalid' : ''">
                                        <div class="invalid-feedback" th:errors="*{fechaRegistro}"></div>
                                    </div>
                                    <div class="mb-3 col-md-4">
                                        <label for="idRopa" class="form-label text-dark">Ropa:</label>
                                        <select class="form-select" th:field="*{idRopa}" required
                                                th:classappend="${#fields.hasErrors('idRopa')} ? 'is-invalid' : ''">
                                            <option value="">-- Seleccione una Ropa --</option>
                                            <option th:each="r : ${ropas}" th:value="${r.idRopa}" th:text="${r.nombreRopa}"></option>
                                        </select>
                                        <div class="invalid-feedback" th:errors="*{idRopa}"></div>
                                    </div>
                                    <div class="mb-3 col-md-4">
                                        <label for="idTalla" class="form-label text-dark">Talla:</label>
                                        <select class="form-select" th:field="*{idTalla}" required
                                                th:classappend="${#fields.hasErrors('idTalla')} ? 'is-invalid' : ''">
                                            <option value="">-- Seleccione una Talla --</option>
                                            <option th:each="t : ${tallas}" th:value="${t.idTalla}" th:text="${t.nombreTalla}"></option>
                                        </select>
                                        <div class="invalid-feedback" th:errors="*{idTalla}"></div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="mb-3 col-md-6">
                                        <label for="idProveedor" class="form-label text-dark">Proveedor:</label>
                                        <select class="form-select" th:field="*{idProveedor}" required
                                                th:classappend="${#fields.hasErrors('idProveedor')} ? 'is-invalid' : ''">
                                            <option value="">-- Seleccione un Proveedor --</option>
                                            <option th:each="p : ${proveedores}" th:value="${p.idProveedor}" th:text="${p.nombreProveedor}"></option>
                                        </select>
                                        <div class="invalid-feedback" th:errors="*{idProveedor}"></div>
                                    </div>
                                    <div class="mb-3 col-md-6">
                                        <label for="idColegio" class="form-label text-dark">Colegio:</label>
                                        <select class="form-select" th:field="*{idColegio}" required
                                                th:classappend="${#fields.hasErrors('idColegio')} ? 'is-invalid' : ''">
                                            <option value="">-- Seleccione un Colegio --</option>
                                            <option th:each="c : ${colegios}" th:value="${c.idColegio}" th:text="${c.nombreColegio}"></option>
                                        </select>
                                        <div class="invalid-feedback" th:errors="*{idColegio}"></div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="mb-3 col-md-6">
                                        <label for="cantidad" class="form-label text-dark">Cantidad:</label>
                                        <input type="number" class="form-control" th:field="*{cantidad}" required min="1"
                                               th:classappend="${#fields.hasErrors('cantidad')} ? 'is-invalid' : ''">
                                        <div class="invalid-feedback" th:errors="*{cantidad}"></div>
                                    </div>
                                    <div class="mb-3 col-md-6">
                                        <label for="preciounitario" class="form-label text-dark">Precio Unitario:</label>
                                        <input type="number" step="0.01" class="form-control" th:field="*{preciounitario}" required
                                               th:classappend="${#fields.hasErrors('preciounitario')} ? 'is-invalid' : ''">
                                        <div class="invalid-feedback" th:errors="*{preciounitario}"></div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="estado" class="form-label text-dark">Estado:</label>
                                    <select class="form-select" th:field="*{estado}" required
                                            th:classappend="${#fields.hasErrors('estado')} ? 'is-invalid' : ''">
                                        <option value="true">Activo</option>
                                        <option value="false">Inactivo</option>
                                    </select>
                                    <div class="invalid-feedback" th:errors="*{estado}"></div>
                                </div>

                                <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                                    <button type="reset" class="btn btn-outline-secondary me-md-2">
                                        Limpiar <i class="fa-solid fa-eraser"></i>
                                    </button>
                                    <button type="submit" class="btn btn-primary me-md-2">
                                        Guardar <i class="fa-solid fa-floppy-disk"></i>
                                    </button>
                                    <a th:href="@{/compras/listado}" class="btn btn-dark">
                                        Regresar <i class="fa-solid fa-circle-left"></i>
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <th:block th:utext="${mensaje}"></th:block> 
        </div>
    </div>
</body>
</html>